!function(){"use strict";function t(t,e){return e.ranking-t.ranking}function e(t){}$.get("http://localhost:3000/data",function(t){e(t)});var n=io(),s=React.createClass({getInitialState:function(){return this.props.names.sort(t),{names:this.props.names}},saveUpdates:function(t){n.emit("updates",t)},updateTable:function(e){e.sort(t),this.setState({names:e})},componentWillMount:function(){var t=this;n.on("table updates",t.updateTable)},handleFormSubmit:function(e){e.preventDefault();var n=e.target[0].value,s=e.target[2].value,a=parseInt(e.target[1].value),i=parseInt(e.target[3].value),r=this.state.names,o=[],u=this.props.names.findIndex(function(t){return t.fname===n}),h=this.props.names.findIndex(function(t){return t.fname===s}),c=-1!==u?r[u].ranking:1e3,l=-1!==h?r[h].ranking:1e3,m=1/(1+Math.pow(10,(l-c)/400)),p=1/(1+Math.pow(10,(c-l)/400)),f=m*(a+i),d=p*(a+i),g=c+32*(a-f),v=l+32*(i-d);return-1===u||void 0===u?(r.push({fname:n,sets:a,ranking:g}),o.push({fname:n,sets:a,ranking:g})):(r[u].sets=r[u].sets+a,r[u].ranking=g,o.push({fname:r[u].fname,sets:r[u].sets,ranking:r[u].ranking})),-1===h||void 0===h?(r.push({fname:s,sets:i,ranking:v}),o.push({fname:s,sets:i,ranking:v})):(r[h].sets=r[h].sets+i,r[h].ranking=v,o.push({fname:r[h].fname,sets:r[h].sets,ranking:r[h].ranking})),r.sort(t),this.saveUpdates(o),this.setState({names:r}),!1},render:function(){}}),a=React.createClass({componentWillMount:function(){var t=this;n.on("table updates",function(){t.getDOMNode().classList.remove("hide"),setTimeout(function(){t.getDOMNode().classList.add("hide")},5e3)})},render:function(){}}),i=React.createClass({render:function(){var t=this.props.names.map(function(t){})}}),r=React.createClass({render:function(){}}),o=React.createClass({getInitialState:function(){return{show:!1,nameValue:"",selectedElement:0,names:this.props.names}},updateData:function(t){var e=new RegExp(t.target.value,"i"),n=this.props.names.filter(function(t){return t.fname.match(e)});return this.setState({names:n}),n.length},showList:function(t){this.setState({show:!0}),this.updateData(t)},hideList:function(){setTimeout(function(){this.setState({show:!1})}.bind(this),150)},handleChange:function(t){var e=this.updateData(t);this.state.show||this.setState({show:!0}),this.setState({nameValue:t.target.value}),this.state.selectedElement>e&&this.setState({selectedElement:0})},handleListClick:function(t){this.setState({nameValue:t.target.innerHTML})},handleKeyPress:function(t){var e=this.state.selectedElement;"ArrowDown"===t.key?this.setState({selectedElement:e<this.state.names.length-1?e+1:e}):"ArrowUp"===t.key?this.setState({selectedElement:e>0?e-1:0}):("Enter"===t.key||"Tab"===t.key)&&("Enter"===t.key&&t.preventDefault(),this.setState({nameValue:this.state.names[e].fname}),this.setState({show:!1}))},render:function(){}}),u=React.createClass({render:function(){var t=React.addons.classSet,e=t({"user-select-list":!0,show:this.props.showNode}),n=0,s=this.props.names.map(function(e){var s=t({active:n++===this.props.selectedEl})}.bind(this))}})}();